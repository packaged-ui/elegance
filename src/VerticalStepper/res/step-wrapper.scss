@import "../../Foundation/res/foundation";

$this: '.step-wrapper';
$step: '.step';

@mixin left-border($first: false, $last: false) {

  @if $first {
    height: calc(100% - 30px);
    top: 30px;
  } @else if $last {
    height: 50%;
    top: 0;
  } @else {
    height: 100%;
    top: 0;
  }
  content: '';
  position: absolute;
  width: 1px;
  background-color: rgba(0, 0, 0, 0.2);
  left: 25px;
  z-index: 1;
}

#{$this} {
  position: relative;
  padding: 24px 0;

  &--border {
    #{$step} {

      > div {
        border: 1px solid rgba(0, 0, 0, 0.3);
        border-radius: 5px;
      }

      &__content {
        border-top: 1px solid rgba(0, 0, 0, 0.3);
      }
    }
  }

  &--icon-middle {
    #{$step} {
      &::before {
        top: calc(50% - 11px) !important;
      }
    }
  }

  #{$step} {
    padding: 20px 20px 20px 60px;
    position: relative;


    &__header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 15px;
      flex-wrap: wrap;

      @include breakpoint(phablet down) {
        flex-direction: column;
        justify-content: space-between;
        padding: 5px 10px;
        > * {
          margin: 5px 0;
        }
      }

      * {
        margin-bottom: 0;
      }
    }

    &__content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 15px;
      flex-wrap: wrap;

      &:empty {
        padding: 0;
        border: none;
      }

      @include breakpoint(phablet down) {
        flex-direction: column;
        justify-content: space-between;
        padding: 15px 10px 30px;
        > * {
          margin: 10px 0;
        }
      }

      * {
        margin-bottom: 0;
      }
    }

    &:before {
      content: '';
      position: absolute;
      height: 20px;
      width: 20px;
      background-color: rgba(198, 198, 198, 1);
      border-radius: 15px;
      left: 25px;
      top: 30px;
      transform: translateX(-50%);
      z-index: 2;
    }

    &:after {
      @include left-border(true)
    }

  }

}

#{$this}--icon-middle > #{$step}:first-child,
#{$this}--icon-middle *:first-child > #{$step}:first-child {
  &::after {
    height: 50% !important;
    top: 50% !important;
  }
}

#{$this} #{$step} ~ *:not(#{$step}) #{$step}, #{$this} #{$step} ~ #{$step} {
  &:after {
    @include left-border();
  }
}

#{$this} *:not(:first-child) ~ #{$step}:not(:first-of-type) {
  &:after {
    @include left-border();
  }
}

#{$this} > #{$step}:last-child, #{$this} *:last-child > #{$step}:last-child {
  &:after {
    @include left-border(false, true)
  }
}

